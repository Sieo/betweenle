import axios from 'axios'
import { defineStore } from 'pinia'

export const useDictionnaireStore = defineStore('dictionnaire', () => {
  const motsDeCinqLettres = [
    'SALVE',
    'moyen',
    'douce',
    'faire',
    'fatal',
    'boule',
    'bouse',
    'clave',
    'exile',
    'etude',
    'corps',
    'ideal',
    'droit',
    'palme',
    'bleue',
    'lache',
    'baies',
    'gages',
    'ficus',
    'foule',
    'effet',
    'debut',
    'clefs',
    'exige',
    'desir',
    'carre',
    'REPOS',
    'depit',
    'parti',
    'grill',
    'banne',
    'impot',
    'etend',
    'inuit',
    'index',
    'crane',
    'connu',
    'pains',
    'jarre',
    'arret',
    'court',
    'etape',
    'major',
    'dises',
    'jambe',
    'murie',
    'nappe',
    'avion',
    'figue',
    'guide',
    'mauve',
    'QUADS',
    'cerfs',
    'grave',
    'etire',
    'lente',
    'ouies',
    'ainee',
    'fondu',
    'RABAT',
    'boite',
    'ouvre',
    'colle',
    'flute',
    'alerte',
    'ornee',
    'SAULE',
    'grace',
    'lacet',
    'TOMBE',
    'crois',
    'evite',
    'houle',
    'frere',
    'essai',
    'SAUNA',
    'irais',
    'donne',
    'gouff',
    'angle',
    'jubil',
    'email',
    'luire',
    'imite',
    'loyal',
    'VESTE',
    'laver',
    'ourag',
    'RECIF',
    'cerne',
    'conte',
    'feule',
    'combe',
    'marie',
    'ecran',
    'STOCK',
    'batir',
    'QUEUE',
    'charm',
    'gaulo',
    'TURBO',
    'TARGE',
    'jaune',
    'ivres',
    'REGAL',
    'leger',
    'etats',
    'gland',
    'encas',
    'maire',
    'haute',
    'mater',
    'avoir',
    'balle',
    'gazou',
    'abris',
    'bruit',
    'appui',
    'jouer',
    'RECUL',
    'arbre',
    'cycle',
    'juger',
    'nuage',
    'embue',
    'nerve',
    'RAIDE',
    'REVER',
    'idole',
    'bombe',
    'SERUM',
    'RALER',
    'grecs',
    'larme',
    'etres',
    'RAGER',
    'dechu',
    'RAILS',
    'WAGON',
    'autre',
    'lance',
    'bonne',
    'emois',
    'chefs',
    'TABAC',
    'ecart',
    'exact',
    'dures',
    'miser',
    'inoui',
    'lecon',
    'fakir',
    'bases',
    'derap',
    'haine',
    'nains',
    'finit',
    'fruit',
    'murer',
    'drape',
    'dedie',
    'banal',
    'ceint',
    'donna',
    'noeud',
    'masse',
    'frime',
    'parmi',
    'adore',
    'grand',
    'obten',
    'culte',
    'cruel',
    'malin',
    'TOTAL',
    'crate',
    'belge',
    'garde',
    'fumee',
    'TANIN',
    'colis',
    'aussi',
    'VENTE',
    'ombre',
    'grief',
    'barre',
    'VEGAN',
    'VEINE',
    'clare',
    'anime',
    'niche',
    'nerfs',
    'grain',
    'outil',
    'livre',
    'borne',
    'navet',
    'hardi',
    'ajout',
    'genet',
    'clame',
    'grele',
    'cable',
    'guise',
    'nuits',
    'SOUDE',
    'monde',
    'RAIES',
    'fosse',
    'chien',
    'audio',
    'nasse',
    'brave',
    'SALUT',
    'datte',
    'grues',
    'azote',
    'minou',
    'TROIS',
    'odeur',
    'TACOS',
    'parce',
    'divan',
    'fable',
    'essor',
    'TOTEM',
    'SOEUR',
    'delai',
    'manne',
    'epice',
    'berge',
    'orgue',
    'REFUS',
    'devra',
    'cuire',
    'naive',
    'jouir',
    'etait',
    'neige',
    'RADAR',
    'RACES',
    'noyau',
    'enfin',
    'cadre',
    'froid',
    'front',
    'feter',
    'offre',
    'etage',
    'erige',
    'emule',
    'epine',
    'filou',
    'caser',
    'coeur',
    'noter',
    'heure',
    'emirs',
    'hurle',
    'blanc',
    'RABOT',
    'bouge',
    'audit',
    'epais',
    'doigt',
    'calme',
    'loint',
    'passe',
    'actif',
    'faune',
    'SATAN',
    'TETUE',
    'enfer',
    'devin',
    'filet',
    'TARTE',
    'danse',
    'ancre',
    'YACHT',
    'RATER',
    'ouest',
    'matin',
    'muter',
    'forte',
    'RADIO',
    'RENDU',
    'genre',
    'adieu',
    'chute',
    'brule',
    'noirs',
    'egale',
    'notes',
    'gerbe',
    'mince',
    'QUAND',
    'URINE',
    'media',
    'devie',
    'honte',
    'parut',
    'comme',
    'clown',
    'abime',
    'decor',
    'garni',
    'joute',
    'fonce',
    'haies',
    'felin',
    'brume',
    'VAGUE',
    'manif',
    'moral',
    'RAPER',
    'grinc',
    'envie',
    'garer',
    'atlas',
    'etang',
    'axial',
    'jetee',
    'merle',
    'monts',
    'halte',
    'bains',
    'elite',
    'galop',
    'RADIS',
    'forme',
    'debat',
    'RAFLE',
    'muets',
    'citer',
    'doute',
    'VELUX',
    'train',
    'futur',
    'cimes',
    'SALSA',
    'ecole',
    'mesur',
    'carte',
    'exode',
    'REBUT',
    'lutte',
    'TAPIS',
    'RATON',
    'chaud',
    'joule',
    'epier',
    'QUAIS',
    'gober',
    'dette',
    'buche',
    'TRACE',
    'acier',
    'capot',
    'objet',
    'ondul',
    'beaux',
    'evade',
    'ebahi',
    'marge',
    'cages',
    'femme',
    'meteo',
    'dires',
    'civil',
    'craie',
    'alias',
    'amour',
    'occir',
    'SCORE',
    'fusil',
    'celui',
    'hotel',
    'UTILE',
    'extra',
    'apres',
    'fuite',
    'haler',
    'zebre',
    'blocs',
    'moule',
    'zumba',
    'chene',
    'folie',
    'abord',
    'modem',
    'USINE',
    'corne',
    'TARDE',
    'bijou',
    'flanc',
    'ennui',
    'RACLE',
    'belle',
    'chaos',
    'QUOTA',
    'joies',
    'jours',
    'merde',
    'modif',
    'alors',
    'frein',
    'TIGRE',
    'noble',
    'entre',
    'TRACT',
    'image',
    'colon',
    'force',
    'musee',
    'facon',
    'asile',
    'epave',
    'panne',
    'endos',
    'coupe',
    'canon',
    'goule',
    'furet',
    'lueur',
    'mange',
    'metre',
    'cours',
    'aider',
    'glace',
    'frais',
    'RADIN',
    'crier',
    'motif',
    'magie',
    'hibou',
    'dense',
    'jouet',
    'aimer',
    'degre',
    'SEPIA',
    'icone',
    'fines',
    'herbe',
    'VASTE',
    'egout',
    'demie',
    'foire',
    'fiche',
    'epoux',
    'avers',
    'ordre',
    'final',
    'cible',
    'manie',
    'minot',
    'osent',
    'faims',
    'burin',
    'juste',
    'molle',
    'jurer',
    'geste',
    'avale',
    'lundi',
    'choix',
    'cause',
    'naifs',
    'RANGE',
    'ferme',
    'enjeu',
    'SAUCE',
    'avoue',
    'lourd',
    'ongle',
    'diver',
    'emets',
    'goutt',
    'ferre',
  ]

  const alphabet = [...'abcdefghijklmnopqrstuvwxyz']

  function counter(str: string, range: string[]) {
    return str >= range[0] && str <= range[1] ? 1 : 0
  }

  function getAll() {
    return motsDeCinqLettres
  }

  function getMotRandom() {
    const today = new Date()
    const seed =
      today.getFullYear() * 10000 +
      (today.getMonth() + 1) * 100 +
      today.getDate()
    const randomIndex = seed % motsDeCinqLettres.length
    return motsDeCinqLettres[randomIndex]
  }

  const API_URL = '/api?action=query&format=json&titles='

  async function verifierExistenceMot(mot: string): Promise<boolean> {
    const motNormalise = mot.toLowerCase()
    if (motNormalise.length !== 5) {
      return false
    }
    try {
      const response = await axios.get(API_URL + motNormalise, {
        headers: {
          'Access-Control-Allow-Origin': '*',
        },
      })
      console.log(response)
      return true
    } catch (error) {
      console.error(error)
      return false
    }
  }

  return { getAll, getMotRandom, verifierExistenceMot, counter, alphabet }
})
